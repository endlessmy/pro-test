<!DOCTYPE html>
<html lang="zh-CN">

	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>工作日志</title>
		<link rel="stylesheet" href="css/bootstrap.min.css" />
		<link rel="stylesheet" href="css/common.css" />
		<link rel="stylesheet" href="css/styles.css" />
		<link rel="stylesheet" href="css/work.css" />
		<script src="js/less.js" type="text/javascript"></script>
	</head>
	
	<body>
		<header>
			<div class="container">
				<nav class="nav">
					<img src="img/logo.png" class="logo" />
					<h2>支撑中心管理平台</h2>
					<div class="admin">
						<img src="img/admin.jpg">
						<span class="roger">roger</span>
						<a href="javascript:;" class="down"></a>
					</div>
				</nav>
			</div>
		</header>
		<!--导航-->
		<div class="direct">
			<div class="container">
				<ul>
					<li>
						<a href="index.html">我的项目</a>
					</li>
					<li class="on">
						<a href="work.html">工作日志</a>
					</li>
					<li>
						<a href="test.html">测试记录</a>
					</li>
					<li>
						<a href="manage.html">事务管理</a>
					</li>
					<li>
						<a href="count.html">统计</a>
					</li>
				</ul>
			</div>
		</div>
		<!--工作日志-->
		<div class="project work animated an-fadeIn">
			<div class="container">
				<div class="pro-top col-md-12 col-lg-12">
					<div class="pro-left">
						<h2 class="h2 week">日报</h2>
						<h2 class="h2" id="week">周报</h2>
						<a href="javascript:;" id="add"><img src="img/add.png"></a>
					</div>
					<div class="pro-right">
						<input type="text" placeholder="Search" />
					</div>
				</div>
				<div class="pro-center col-md-12 col-lg-12">
					<!--日报-->
					<div class="daybao weekbao animated an-fadeIn" >
						<div class="panel-group col-md-12 col-lg-12">
							
							<div class="panel panel-default">
								<div class="panel-heading">
									<a href="javascript:;" class="flex">
										<div class="panel-title">
											<span>20171011</span>
											<img src="img/work2.jpg" class="work1">
										</div>

									</a>
								</div>
								<div class="panel-collapse collapse">
									<div class="panel-body">
										<p>今日已完成</p>
										<p>国内sdk3.0.1服务器开发细节，这里是文案哦，可以写详细点；2、这里是日报内容；</p>
										<p>困难或总结</p>
										<p>无，如果有可以写！</p>
									</div>
								</div>
							</div>
							<div class="panel panel-default">
								<div class="panel-heading">
									<a href="javascript:;" class="flex">
										<div class="panel-title">
											<span>20171011</span>
											<img src="img/work2.jpg" class="work1">
										</div>
									</a>
								</div>
								<div class="panel-collapse collapse">
									<div class="panel-body">
										<p>今日已完成</p>
										<p>国内sdk3.0.1服务器开发细节，这里是文案哦，可以写详细点；2、这里是日报内容；</p>
										<p>困难或总结</p>
										<p>无，如果有可以写！</p>
									</div>
								</div>
							</div>
							<div class="panel panel-default">
								<div class="panel-heading">
									<a href="javascript:;" class="flex">
										<div class="panel-title">
											<span>20171011</span>
											<img src="img/work2.jpg" class="work1">
										</div>
									</a>
								</div>
								<div class="panel-collapse collapse">
									<div class="panel-body">
										<p>今日已完成</p>
										<p>国内sdk3.0.1服务器开发细节，这里是文案哦，可以写详细点；2、这里是日报内容；</p>
										<p>困难或总结</p>
										<p>无，如果有可以写！</p>
									</div>
								</div>
							</div>
                        	
							
                            <div class="panel panel-default">
								<div class="panel-heading">
									<a href="javascript:;" class="flex">
										<div class="panel-title">
											<span>20171011</span>
											<img src="img/work2.jpg" class="work1">
										</div>

									</a>
								</div>
								<div class="panel-collapse collapse">
									<div class="panel-body">
										<p>今日已完成</p>
										<p>国内sdk3.0.1服务器开发细节，这里是文案哦，可以写详细点；2、这里是日报内容；</p>
										<p>困难或总结</p>
										<p>无，如果有可以写！</p>
									</div>
								</div>
							</div>
							<div class="panel panel-default">
								<div class="panel-heading">
									<a href="javascript:;" class="flex">
										<div class="panel-title">
											<span>20171011</span>
											<img src="img/work2.jpg" class="work1">
										</div>

									</a>
								</div>
								<div class="panel-collapse collapse">
									<div class="panel-body">
										<p>今日已完成</p>
										<p>国内sdk3.0.1服务器开发细节，这里是文案哦，可以写详细点；2、这里是日报内容；</p>
										<p>困难或总结</p>
										<p>无，如果有可以写！</p>
									</div>
								</div>
							</div>
						</div>
					</div>
					<!--周报-->
					<div class="daybao animated an-fadeIn">
						<div class="panel-group col-md-12 col-lg-12">
							<div class="panel panel-default">
								<div class="panel-heading">
									<a href="javascript:;" class="flex">
										<div class="panel-title">
											<span>20171011</span>
											<img src="img/work2.jpg" class="work1">
										</div>

									</a>
								</div>
								<div id="collapseSeven" class="panel-collapse collapse">
									<div class="panel-body">
										<p>今日已完成</p>
										<p>国内sdk3.0.1服务器开发细节，这里是文案哦，可以写详细点；2、这里是日报内容；</p>
										<p>困难或总结</p>
										<p>无，如果有可以写！</p>
									</div>
								</div>
							</div>
							<div class="panel panel-default">
								<div class="panel-heading">
									<a href="javascript:;" class="flex">
										<div class="panel-title">
											<span>20171011</span>
											<img src="img/work2.jpg" class="work1">
										</div>
									</a>
								</div>
								<div id="collapseEight" class="panel-collapse collapse">
									<div class="panel-body">
										<p>今日已完成</p>
										<p>国内sdk3.0.1服务器开发细节，这里是文案哦，可以写详细点；2、这里是日报内容；</p>
										<p>困难或总结</p>
										<p>无，如果有可以写！</p>
									</div>
								</div>
							</div>
							<div class="panel panel-default">
								<div class="panel-heading">
									<a href="javascript:;" class="flex">
										<div class="panel-title">
											<span>20171011</span>
											<img src="img/work2.jpg" class="work1">
										</div>
									</a>
								</div>
								<div id="collapseEight" class="panel-collapse collapse">
									<div class="panel-body">
										<p>今日已完成</p>
										<p>国内sdk3.0.1服务器开发细节，这里是文案哦，可以写详细点；2、这里是日报内容；</p>
										<p>困难或总结</p>
										<p>无，如果有可以写！</p>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!--新增-->
		<div class="modal fade work-modal" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<a class="close" data-dismiss="modal" aria-label="Close">
							<img aria-hidden="true" src="img/modal-close.png">
						</a>
						<div class="modal-title">
							<span id="exampleModalLabel"></span>
							<span id="date"></span>
							<div class="day">
								<span class="week-one"></span> - <span class="week-five"></span>
							</div>
						</div>
					</div>
					<div class="modal-body">
						<textarea class="form-control result" rows="5"></textarea>
						<textarea class="form-control hard" rows="5" placeholder="困难或总结："></textarea>
					</div>
					<div class="modal-footer">
						<span class="remark">* 内容不能为空</span>
						<a href="javascript:;">提交</a>
					</div>
				</div>
			</div>
		</div>
		<!--克隆-->
		<div class="panel panel-default clone-box">
			<div class="panel-heading">
				<a href="javascript:;" class="flex">
					<div class="panel-title">
						<span></span>
						<img src="img/work2.jpg" class="work1">
					</div>
				</a>
			</div>
			<div class="panel-collapse collapse">
				<div class="panel-body">
					<p>今日已完成</p>
					<p class="finish-detail"></p>
					<p>困难或总结</p>
					<p class="summary">无，如果有可以写！</p>
				</div>
			</div>
		</div>
		<script>
			less = {
				env: "development",
				async: false,
				fileAsync: false,
				poll: 1000,
				functions: {},
				dumpLineNumbers: "comments",
				relativeUrls: false,
				rootpath: ":/a.com/"
			};
		</script>
		<script type="text/javascript" src="js/jquery-1.10.2.min.js"></script>
		<script type="text/javascript" src="js/bootstrap.min.js"></script>
		<script type="text/javascript" src="js/task.js"></script>
		<script>
			$(".panel-title").click(function() {
				$(this).find(".work1").toggleClass("work2");
			});
			$(".pro-left h2").click(function() {
				$(this).addClass("week").siblings().removeClass("week");
				var index = $(this).index();
				$(".pro-center .daybao").eq(index).addClass("weekbao").siblings().removeClass("weekbao");
				init();
			});
			
			/*折叠面板*/
			$('.flex').on('click', function() {
				$(this).parent().siblings(".collapse").collapse('toggle');
			});

			/*弹窗*/
			$("#add").click(function() {
				$("#exampleModal").modal({
					backdrop: 'static',
					keyboard: false
				});
				if($("#week").hasClass("week")) {
					$("#exampleModalLabel").text("填写周报");
					$(".result").attr("placeholder", "本周工作成果：");
					$(".modal-title .day").css("display", "block");
					$("#date").css("display", "none");
					var now = new Date();
					var nowWeek = now.getDay();
					var week1 = GetDateStr(1 - nowWeek)
					var week5 = GetDateStr(5 - nowWeek)
					console.log(week1)
					console.log(week5)
					$(".week-one").text(week1);
					$(".week-five").text(week5);

					function GetDateStr(AddDayCount) {
						var dd = new Date();
						dd.setDate(dd.getDate() + AddDayCount); //获取AddDayCount天后的日期
						var y = dd.getFullYear();
						var m = dd.getMonth() + 1; //获取当前月份的日期
						var d = dd.getDate();
						return y + "" + toDouble(m) + "" + toDouble(d);
					}
					
				} else {
					$("#exampleModalLabel").text("填写日报");
					$(".result").attr("placeholder", "本日工作成果：");
					var time = new Date();
					var day = time.getFullYear() + "" + toDouble((time.getMonth() + 1)) + "" + toDouble(time.getDate());
					$("#date").text("Date " + day);
					$(".modal-title .day").css("display", "none");
					$("#date").css("display", "block");
				}
			})
			init();
			function init(){
				$('.weekbao .panel').each(function(i,n){
					if((i+1)%3 == 0){
						$(this).after('<div class="clear"></div>')
						$(this).addClass("active-tab");
					}
				})
			}
			/*保存*/
			$(".modal-footer a").click(function() {
				var result = $(".modal-body .result");
				var hard = $(".modal-body .hard");
				$(".clone-box .finish-detail").text($(".modal-body .result").val());
				$(".clone-box .summary").text($(".modal-body .hard").val());
				if($("#week").hasClass("week")) {
					$(".clone-box .panel-title span").text($(".day").text());
				} else {
					var time = new Date();
					var day = time.getFullYear() + "" + toDouble((time.getMonth() + 1)) + "" + toDouble(time.getDate());
					$(".clone-box .panel-title span").text(day);
				}
//				if(result.val() == '') {
//					$(".modal-body .result").css("border", "1px solid #FA003A");
//					$(".modal-footer .remark").css("display", "block");
//					$(".modal-body .result").keyup(function() {
//						if(result.val() !== '') {
//							$(".modal-body .result").css("border", "1px solid #ddd");
//							$(".modal-footer .remark").css("display", "none");
//						}
//					})
//					return false;
//				} else if(hard.val() == '') {
//					$(".modal-body .hard").css("border", "1px solid #FA003A");
//					$(".modal-footer .remark").css("display", "block");
//					$(".modal-body .hard").keyup(function() {
//						if(result.val() !== '') {
//							$(".modal-body .hard").css("border", "1px solid #ddd");
//							$(".modal-footer .remark").css("display", "none");
//						}
//					});
//					return false;
//				}else{
					var clone = $(".clone-box").clone(true);
					clone.removeClass("clone-box");
					$(this).attr("data-dismiss", "modal");										
                    $('.weekbao .panel-group').prepend(clone);
//				}
				$(".panel-group .clear").removeClass("clear");
				$(".weekbao .panel").removeClass("active-tab");
				init();
				result.val('');
				hard.val('');
			});

			function toDouble(num){
				if(num<10){
					return '0'+num;
				}else{
					return num;
				}
			}
		</script>
	</body>

</html>