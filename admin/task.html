<!DOCTYPE html>
<html lang="zh-CN">

	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title></title>
		<link rel="stylesheet" href="css/bootstrap.min.css" />
		<link rel="stylesheet" href="css/bootstrap-select.css" />
		<link rel="stylesheet" href="css/common.css" />
		<link rel="stylesheet" href="css/styles.css" />
		<link rel="stylesheet" href="css/task.css" />
		<link rel="stylesheet/less" type="text/css" href="css/task.less" />
		<link rel="stylesheet" href="css/daterangepicker.css" />
		<script src="js/less.js" type="text/javascript"></script>
	</head>

	<body>
		<header>
			<div class="container">
				<nav class="nav">
					<img src="img/logo.png" class="logo" />
					<h2>支撑中心管理平台</h2>
					<div class="admin">
						<img src="img/admin.jpg">
						<span class="roger">roger</span>
						<a href="##" class="down"></a>
					</div>
				</nav>
			</div>
		</header>
		<!--导航-->
		<div class="direct">
			<div class="container">
				<ul>
					<li class="on">
						<a href="index.html">我的项目</a>
					</li>
					<li>
						<a href="work.html">工作日志</a>
					</li>
					<li>
						<a href="test.html">测试记录</a>
					</li>
					<li>
						<a href="manage.html">事务管理</a>
					</li>
					<li>
						<a href="count.html">统计</a>
					</li>
				</ul>
			</div>
		</div>
		<!--任务列表-->
		<div class="task animated an-fadeIn">
			<div class="container">
				<div class="task-top col-md-12 col-lg-12">
					<h2 class="h3">任务列表</h2>
					<input type="text" placeholder="Search" />
					<a href="javascript:history.go(-1)"></a>
				</div>
				<div class="task-center col-md-12 col-lg-12">
					<div class="title">
						<img src="img/black.png" />
						<span class="name-version">国内SDK v3.0.1</span>
						<a href="##" class="allchose" style="float: right;">全选</a>
					</div>
					<div class="tab">
						<p>Jeson<span>项目负责人</span></p>
						<table class="table">
							<tbody>
								<tr style="display: none;">
									<td class="check">
										<input type="checkbox" id="checkbox" class="check1" />
										<label for="checkbox"></label>
									</td>
									<td class="infos"><input type="text" placeholder="项目描述" value="服务端接口开发，包含功能点很多，这里是文字！" readonly="readonly"></td>
									<td class="who">
										<!--<input type="text" placeholder="设置成员" value="罗甜甜" readonly="readonly">-->
										<select class="bla bla bli name select" multiple data-live-search="true">
											<option>cow</option>
											<option>sd</option>
											<option>sfv</option>
											<option>dfb</option>
											<option>dfbnfd</option>
											<option>ghrg</option>
										</select>
										<div class="hide-true"></div>
									</td>
									<td>
										<div class="choose-day">
											<input type="text" class="begin" value="20171011" placeholder="开始日期" readonly="readonly"> -
											<input type="text" class="end" value="20171021" placeholder="结束日期" readonly="readonly">
										</div>
									</td>
									<td class="this">
										<a href="##" class="edit">编辑</a>
									</td>
									<td class="this">
										<a href="##" class="remove">删除</a>
									</td>
								</tr>	
								<tr>
									<td class="check">
										<input type="checkbox" id="checkboxm" class="check1" />
										<label for="checkboxm"></label>
									</td>
									<td class="infos"><input type="text" placeholder="项目描述" value="服务端接口开发，包含功能点很多，这里是文字！" readonly="readonly"></td>
									<td class="who">
										<!--<input type="text" placeholder="设置成员" value="罗甜甜" readonly="readonly">-->
										<select class="selectpicker bla bla bli name select" multiple data-live-search="true">
											<option>cow</option>
											<option>sd</option>
											<option>sfv</option>
											<option>dfb</option>
											<option>dfbnfd</option>
											<option>ghrg</option>
										</select>
										<div class="hide-true"></div>
									</td>
									<td>
										<div class="choose-day">
											<input type="number" class="begin" value="20171011" placeholder="开始日期" readonly="readonly"> -
											<input type="number" class="end" value="20171021" placeholder="结束日期" readonly="readonly">
										</div>
									</td>
									<td class="this">
										<a href="##" class="edit">编辑</a>
									</td>
									<td class="this">
										<a href="##" class="remove">删除</a>
									</td>
								</tr>
								<tr>
									<td class="check">
										<input type="checkbox" id="checkbox-n" class="check1" />
										<label for="checkbox-n"></label>
									</td>
									<td class="infos"><input type="text" placeholder="项目描述" value="服务端接口开发，包含功能点很多，这里是文字！" readonly="readonly"></td>
									<td class="who">
										<!--<input type="text" placeholder="设置成员" value="罗甜甜" readonly="readonly">-->
										<select class="selectpicker bla bla bli name select" multiple data-live-search="true">
											<option>cow</option>
											<option>sd</option>
											<option>sfv</option>
											<option>dfb</option>
											<option>dfbnfd</option>
											<option>ghrg</option>
										</select>
										<div class="hide-true"></div>
									</td>
									<td>
										<div class="choose-day">
											<input type="text" class="begin" value="20171011" placeholder="开始日期" readonly="readonly"> -
											<input type="text" class="end" value="20171021" placeholder="结束日期" readonly="readonly">
										</div>
									</td>
									<td class="this">
										<a href="##" class="edit">编辑</a>
									</td>
									<td class="this">
										<a href="##" class="remove">删除</a>
									</td>
								</tr>
							</tbody>
						</table>
					</div>
					<div class="oper">
						<!--<a href="##" class="delete">编辑</a>-->
						<a href="##" class="add" id="addtask">添加任务</a>
					</div>
				</div>
			</div>
		</div>
		<!--新增任务-->
		<!--<div class="modal fade task-modal" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel">
		  <div class="modal-dialog" role="document">
		    <div class="modal-content">
		      <div class="modal-header">
		        <a class="close" data-dismiss="modal" aria-label="Close">
		        	<img aria-hidden="true" src="img/modal-close.png">
		        </a>
		        <div class="modal-title">
		        	<span id="exampleModalLabel">新增任务</span>
		        </div>		        
		      </div>
		      <div class="modal-body">		      	
	         	<div class="day">
	         		<span>日期</span>
	         		<input type="text" placeholder="请选择开始日期" id="day1" readonly="readonly"/>
	         		<span class="line"></span>
	         		<input type="text" placeholder="请选择结束日期" id="day2" readonly="readonly"/>
	         	</div>
	         	<input type="text" placeholder="设置成员" class="name"/>
		        <textarea class="form-control" rows="5" placeholder="项目描述："></textarea>
		      </div>
		      <div class="modal-footer">
		      	<span class="remark">* 内容不能为空</span>
                <a href="##">保存</a>
		      </div>
		    </div>
		  </div>
		</div>-->
		<script type="text/javascript" src="js/jquery-1.10.2.min.js"></script>
		<script type="text/javascript" src="js/bootstrap.min.js"></script>
		<script type="text/javascript" src="js/task.js"></script>
		<script type="text/javascript" src="js/laydate.js"></script>
		<script src="js/moment.min.js" type="text/javascript"></script>
		<script type="text/javascript" src="js/jquery.daterangepicker.js"></script>
		<script type="text/javascript" src="js/jquery.datetimepicker.full.js"></script>
		<script type="text/javascript" src="js/bootstrap-select.js"></script>
		<script type="text/javascript">
			$(function() {				
				$('.table').find('.btn-default').css('border-bottom','none');
				/*添加任务*/
				var oId = 1;
				$("#addtask").click(function() {
					var day1 = $(".task-modal #day1");
					var day2 = $(".task-modal #day2");
//			      	var d1 = new Date(day1.val().replace(/\-/g, "\/"));  
//			        var d2 = new Date(day2.val().replace(/\-/g, "\/"));
					var clone = $(".table tbody tr:first-child").clone(true);

					clone.find('input').val('');
					clone.find('input').addClass('border-bot-blank');
					clone.find('.choose-day').addClass('border-bot-blank');
					clone.find(".btn-default").addClass('border-bot-blank');
					clone.find("input").removeAttr('readonly');
					clone.find(".hide-true").addClass('display-hide');
					clone.find('.edit').text('保存');
					clone.find('.check1').attr("id", "checkbox" + oId);
					clone.find('label').attr("for", "checkbox" + oId);					
					clone.find('select').selectpicker();
					oId++;
					console.log(oId);
					initDate(clone.find('.begin'));
					initDate(clone.find('.end'));
					clone.attr('style', '');
					$(".tab .table tbody").append(clone);
				});
				
				
				/*编辑*/
				$("tbody").delegate(".edit", "click", function() {
					if($(this).text() == "编辑") {
						$(this).text("保存");
						$(this).parents("tr").find("input").removeAttr('readonly');
						$(this).parents("tr").find(".hide-true").addClass('display-hide');
						$(this).parents("tr").find("input").addClass('border-bot-blank');
						$(this).parents("tr").find(".btn-default").addClass('border-bot-blank');
						$(this).parents("tr").find(".choose-day").addClass('border-bot-blank');
						$(this).parents("tr").find(".begin").dateRangePicker({
							separator: 'to',
							singleDate: true
						});
						$(this).parents("tr").find(".end").dateRangePicker({
							separator: 'to',
							singleDate: true
						});
					} else if($(this).text() == "保存") {
						var valCount = 0;
						var inp = $(this).parents("tr").find("input[type='text']");
						var spanText = $(this).parents("tr").find(".filter-option");
//						console.log($(this).parents("tr").find(".filter-option").text());
						var len = inp.length;
						for(var i = 0; i < len; i++) {
							var val = inp.eq(i).val();
							if(val) {
								valCount++;
							}
						}
						if(valCount < 3 || spanText.text() == '' || spanText.text() == '设置成员') {
							alert("内容不能为空！");
							return false;
						} else {
							alert("保存成功！");
							$(this).text("编辑");
							$(this).parents("tr").find("input").attr('readonly', "readonly");
							$(this).parents("tr").find("input").eq(3).unbind();
							$(this).parents("tr").find("input").eq(4).unbind();
							$(this).parents("tr").find(".btn-default").removeClass('border-bot-blank');
							$(this).parents("tr").find(".hide-true").removeClass('display-hide');
							$(this).parents("tr").find("input").removeClass('border-bot-blank');
							$(this).parents("tr").find(".choose-day").removeClass('border-bot-blank');
						}
					}
				});

				/**全选*/
				$(".title .allchose").click(function() {
					var input = $("input[type='checkbox']");
					if($(this).hasClass('on')) {
						$(this).removeClass("on")
						input.prop("checked", false);
						input.parent("td").siblings().removeClass("choose");
						input.parents('tr').find(".filter-option").removeClass("choose");

					} else {
						$(this).addClass("on")
						input.prop("checked", true);
						input.parent("td").siblings().not('.this').addClass("choose");
						input.parents('tr').find(".filter-option").addClass("choose");
					};
				});

				/**单选*/
				$("input[type='checkbox']").click(function(){
					if($(this).hasClass('on')){
						$(this).removeClass("on");						
						$(this).prop('checked',false);
						console.log(123);
						$(this).parent("td").siblings().removeClass("choose");
                        $(this).parents('tr').find(".filter-option").removeClass("choose");
					}else{
						$(this).addClass("on");
						$(this).prop("checked", true);
						$(this).parent("td").siblings().addClass("choose");
						$(this).parents('tr').find(".filter-option").addClass("choose");
					};
				});

				/**删除*/
				$(".table .remove").click(function() {
					$(this).parents("tr").remove();
				})

				//函数
				function initDate(ele) {
					var len = ele.length;
					for(var i = 0; i < len; i++) {
						var readonly = ele.eq(i).attr("readonly");
						if(readonly) {
							continue;
						}
						ele.eq(i).dateRangePicker({
							separator: 'to',
							singleDate: true
						});
					}
				}

				//		$('.selectpicker').selectpicker({  
				//          'selectedText': 'cat'  
				//      });
			});

//			$('.selectpicker').selectpicker({
//				'countSelectedText':function(e){
//					console.log(e)
//				}
//			});
		</script>
	</body>

</html>